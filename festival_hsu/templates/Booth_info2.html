<!DOCTYPE html>

<html lang="en">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- {% comment %} <link rel="stylesheet" href="{% static "Booth_Info.css" %}" > {% endcomment %} -->
    <link rel="stylesheet" href="{% static "css/booth.css" %}" >
    {% comment %} <link rel="stylesheet" href="{% static 'Booth_Info.css' %}"> {% endcomment %}
    {% comment %} <link rel="stylesheet" href="/festival_hsu/thumbs_up/static/Booth_Info.css"> {% endcomment %}
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="{% static "js/Booth_Info.js" %}"></script>
    <style>
        @font-face {
            font-family: "ulsanjunggu";
            src: url("{% static "ttf/ulsanjunggu.ttf" %}") format("truetype");
            font-weight: normal;
        }
        @font-face {
            font-family: "Gmarket";
            src: url("{% static "ttf/GmarketSansTTFMedium.ttf" %}") format("truetype");
            font-weight: normal;
        }
        @font-face {
            font-family: "Gmarket2";
            src: url("{% static "ttf/GmarketSansTTFLight.ttf" %}") format("truetype");
            font-weight: normal;
        }
    </style>
    <title>Booth_Info</title>
</head>

<body>
    
    <div id="header" style = "z-index:-10000; width: 100% ; height : 100% ;position:absolute;">
        <object type="text/html" data="{% static 'back.html' %}" style = "width: 100% ; height : 100% ;"></object>
    </div>
    <div class="main">
            
        <div class="topbox">
            <div class="동그라미">동그라미</div>
            <div class="한서대대동제-outbox">
                <div class="한서대대동제">한서대<br>대동제</div>
            </div>
        </div>

        <div class="midbox">
            <hr>
            <div class="boothinfo">
                BOOTH INFO
            </div>
            <hr>
        </div>

        <div class="bottombox">
            
            <div class="introduce_title">
                <div>{{intruduce.title}}</div>
                <div class = "con">
                    {% comment %} <button id="myid" value = "{{introduce.title}}" class = "move" ></button> {% endcomment %}
                    <p id="count-{{ intruduce.id }}" style="font:bold 1em; margin-top: 3px">
                        좋아요&nbsp;{{ intruduce.likecount }}개</p>
                    <button id = "Like" name="{{ intruduce.id }}"  style="margin-top: 7px" value = "dd" class="heart">
                    
                </div>
            </div>

            <div class="intruduce_con">
                <div class="title">👉 부스 소개</div>
                <div class="content">{{ intruduce.intruduce }}</div>
            </div>

            <div class="intruduce_con">
                <div class="title">👉 메뉴</div>
                {% for post in comments %}
                    <div class="menu_content">
                        <div class="content">{{post.name}}</div>
                        <div class="content">{{post.price}}</div>
                    </div>
                {% endfor %}
                
            </div>

        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
        $(document).on("click", "#Like", function () {
            console.log("#"+ $(this).val())
            var pk = $(this).attr('name')
            console.log(pk)
            $.ajax({ // ajax로 서버와 통신
                type: "POST", // 데이터를 전송하는 방법
                url: "{% url 'video_like' %}", // 통신할 url을 지정
                data: { 'pk': pk ,'csrfmiddlewaretoken': '{{ csrf_token }}'}, // 서버로 데이터 전송시 옵션, pk를 넘겨야 어떤 video인지 알 수 있음
                dataType: "json",
                success: function (response) { // 성공
                    
                    $("#count-" + pk).html("좋아요&nbsp;" + response.likes_count + "개"); // 좋아요 개수 변경
                },
                error: function (request, status, error) { // 실패
                    alert("로그인이 필요합니다.")
                    console.log(url)
                    console.log(data)
                },
            });
        });
    });
    </script>
</body>
</html>